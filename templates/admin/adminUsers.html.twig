{% extends 'base.html.twig' %}

{% block title %} {{ parent() }} Tableau de bord utilisateurs{% endblock %}

{% block breadcrumb %}
    <li class="list-inline-item seprate"><span>/</span></li>
    <li class="list-inline-item">Administration</li>
    <li class="list-inline-item seprate"><span>/</span></li>
    <li class="list-inline-item">Tableau de bord</li>
{% endblock %}
{% block addUser %}
    <a class="au-btn au-btn-icon au-btn--green" href="{{ path('user_create') }}">
    <i class="zmdi zmdi-plus"></i>Ajouter un utilisateur</a>
{% endblock %} 

{% block pageName %} Tableau de bord utilisateurs{% endblock %}

{% block body %}
<section class="bg-success">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col">
                                <!-- USER DATA-->
                                <div class="user-data m-b-40">
                                    <h3 class="title-3 m-b-30"><i class="zmdi zmdi-account-calendar"></i>Utilisateurs</h3>
                                    <!-- FILTER 
                                    <div class="filters m-b-45">
                                        <div class="rs-select2--dark rs-select2--md m-r-10 rs-select2--border">
                                            <select class="js-select2" name="property">
                                                <option selected="selected">Roles</option>
                                                <option value="">Administrateurs</option>
                                                <option value="">Utilisateurs</option>
                                            </select>
                                            <div class="dropDownSelect2"></div>
                                        </div>
                                    </div>
                                    -->
                                    <div class="table-responsive table-data">
                                        <table class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <td>
                                                    </td>
                                                    <td>nom</td>
                                                    <td>role</td>
                                                    <td>solde €</td>
                                                    <td>voir</td>
                                                    <td>modifier</td>
                                                    <td>supprimer</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for user in users %}
                                                <tr>
                                                    <td>
                                                        <label class="au-checkbox">
                                                            <input type="checkbox"><span class="au-checkmark"></span>
                                                        </label>
                                                    </td>
                                                    <td>
                                                        <div class="table-data__info">
                                                            <h6>{{user.firstname}} {{user.lastname}}</h6><span>{{user.email}}</span>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        {% if user.roles is same as(['ROLE_ADMIN']) %}
                                                        <span class="role admin">Admin</span>
                                                        {% else %}
                                                        <span class="role user">User</span>
                                                        {% endif %}
                                                        <a href="{{path('admin_roles', {'id': user.id})}}" class="ml-1">Modifier</a>
                                                    </td>
                                                    <td>
                                                        {{user.solde | number_format(2, ',', '')}} €
                                                    </td>
                                                    <td>
                                                        <a href="{{ path('user_show', {'id': user.id})}}"><i class="zmdi zmdi-eye" style="font-size:1.5em;"></i></a>
                                                    </td>
                                                    <td>
                                                        <a href="{{ path('user_edit', {'id': user.id})}}"><i class="zmdi zmdi-edit" style="font-size:1.5em;"></i></a>
                                                    </td>
                                                    <td>
                                                    {% if user.roles is same as(['ROLE_ADMIN']) %}
                                                        <a href="#"><i class="zmdi zmdi-delete text-secondary disabled" style="font-size:1.5em;"></i></a>
                                                        {% else %}
                                                        <a href="{{ path('user_delete', {'id': user.id})}}"><i class="zmdi zmdi-delete text-danger" style="font-size:1.5em;"></i></a>
                                                        {% endif %}
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <!-- END USER DATA-->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
{% endblock %}
